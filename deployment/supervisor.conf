[supervisord]
nodaemon=false
logfile=/tmp/supervisord.log
pidfile=/tmp/supervisord.pid

; ==================== API 服务 ====================
[program:blockchain-api]
command=python3 /Users/mac/Documents/code/blockchain-data/run_api.py
directory=/Users/mac/Documents/code/blockchain-data
autostart=true
autorestart=true
startretries=3
stderr_logfile=/tmp/blockchain-api-error.log
stdout_logfile=/tmp/blockchain-api.log
user=mac
environment=PYTHONUNBUFFERED=1

; ==================== 定时任务守护进程 ====================
[program:blockchain-scheduler]
command=python3 /Users/mac/Documents/code/blockchain-data/scheduler_daemon.py
directory=/Users/mac/Documents/code/blockchain-data
autostart=true
autorestart=true
startretries=3
stderr_logfile=/tmp/blockchain-scheduler-error.log
stdout_logfile=/tmp/blockchain-scheduler.log
user=mac
environment=PYTHONUNBUFFERED=1

; ==================== 进程组 ====================
[group:blockchain-services]
programs=blockchain-api,blockchain-scheduler
priority=999
